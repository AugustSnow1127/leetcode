# Kth Largest Element in a Stream
**LeetCode**: #703 | **Difficulty**: Easy |
**Category**: Heap / Priority Queue

## ğŸ” Problem Statement
è¨­è¨ˆä¸€å€‹é¡åˆ¥ä¾†æ‰¾åˆ°è³‡æ–™æµä¸­çš„ç¬¬ k å¤§å…ƒç´ ã€‚æ³¨æ„ï¼Œç¬¬ k å¤§å…ƒç´ æ˜¯æ’åºå¾Œçš„é™åºä¸­ä½æ–¼ k ä½ç½®çš„å…ƒç´ ã€‚

å¯¦ä½œä»¥ä¸‹æ–¹æ³•ï¼š
- `KthLargest(k, nums)`ï¼šåˆå§‹åŒ–ï¼Œnums æ˜¯åˆå§‹è³‡æ–™æµ
- `add(val)`ï¼šå°‡ val åŠ å…¥è³‡æ–™æµï¼Œè¿”å›ç•¶å‰ç¬¬ k å¤§çš„å…ƒç´ 

**Example:**
```
KthLargest(k=3, nums=[4,5,8,2])
add(3)   // 4,5,8,2,3ï¼Œç¬¬3å¤§æ˜¯4
add(5)   // 4,5,8,2,3,5ï¼Œç¬¬3å¤§æ˜¯5
add(10)  // 4,5,8,2,3,5,10ï¼Œç¬¬3å¤§æ˜¯5
add(9)   // 4,5,8,2,3,5,10,9ï¼Œç¬¬3å¤§æ˜¯8
add(4)   // 4,5,8,2,3,5,10,9,4ï¼Œç¬¬3å¤§æ˜¯8
```

## ğŸ’¡ è§£é¡Œæ€è·¯

### é—œéµæ´å¯Ÿ
- **æ ¸å¿ƒè§€å¯Ÿ**ï¼šåªéœ€è¦ç¶­è­·æœ€å¤§çš„ k å€‹å…ƒç´ ï¼Œå…¶ä»–çš„å¯ä»¥ä¸Ÿæ£„
- **å•é¡Œç‰¹å¾µ**ï¼šå‹•æ…‹è³‡æ–™æµï¼Œéœ€è¦é »ç¹æ’å…¥å’ŒæŸ¥è©¢

### æ¼”ç®—æ³•é¸æ“‡
- **ç‚ºä»€éº¼é¸ Min Heapï¼Ÿ**
  - æ’åºæ³•ï¼šæ¯æ¬¡ add å¾Œæ’åºï¼ŒO(n log n)
  - **Min Heap**ï¼šç¶­è­·å¤§å°ç‚º k çš„æœ€å°å †ï¼ŒO(log k) æ’å…¥

- **é©ç”¨å ´æ™¯**
  - ç•¶éœ€è¦å‹•æ…‹ç¶­è­·ã€Œå‰ k å€‹ã€å…ƒç´ æ™‚
  - ç•¶éœ€è¦é »ç¹æ’å…¥å’ŒæŸ¥è©¢æ¥µå€¼æ™‚
  - è¤‡é›œåº¦åˆ†æï¼šadd æ“ä½œ O(log k)ï¼Œç©ºé–“ O(k)

### æ™‚æ©Ÿåˆ¤æ–·
çœ‹åˆ°ä»¥ä¸‹ç‰¹å¾µæ™‚ï¼Œè€ƒæ…®ä½¿ç”¨ Heapï¼š
- ğŸ“Š é—œéµå­—ï¼šã€Œç¬¬ k å¤§/å°ã€ã€ã€Œè³‡æ–™æµã€ã€ã€Œé »ç¹æ’å…¥ã€
- ğŸ¯ éœ€æ±‚ï¼šå‹•æ…‹ç¶­è­·æ¥µå€¼ï¼ˆæœ€å¤§/æœ€å°ï¼‰
- âš¡ å„ªåŒ–ï¼šå¾æ’åºçš„ O(n log n) å„ªåŒ–åˆ° O(log k)

## ğŸ¯ å¯¦ä½œç´°ç¯€

### æ­¥é©Ÿåˆ†è§£

1. **åˆå§‹åŒ–**ï¼š
   - ä¿å­˜ k å€¼
   - å»ºç«‹ Min Heapï¼ˆPython ç”¨ `heapq`ï¼Œé è¨­æ˜¯æœ€å°å †ï¼‰
   - å°‡åˆå§‹ nums æ”¾å…¥ heapï¼Œä¿æŒå¤§å°ç‚º k

2. **add(val)**ï¼š
   - å°‡ val åŠ å…¥ heap
   - å¦‚æœ heap å¤§å° > kï¼Œç§»é™¤æœ€å°å…ƒç´ ï¼ˆheapq.heappopï¼‰
   - è¿”å› heap[0]ï¼ˆå³ç¬¬ k å¤§å…ƒç´ ï¼‰

### é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ
```python
import heapq

class KthLargest:
    def __init__(self, k, nums):
        self.k = k
        self.heap = []
        for num in nums:
            heapq.heappush(self.heap, num)
            if len(self.heap) > self.k:
                heapq.heappop(self.heap)

    def add(self, val):
        heapq.heappush(self.heap, val)
        if len(self.heap) > self.k:
            heapq.heappop(self.heap)
        return self.heap[0]
```

**ç‚ºä»€éº¼é€™æ¨£å¯«ï¼Ÿ**
- Min Heap çš„é ‚éƒ¨æ˜¯æœ€å°å…ƒç´ ï¼Œæ°å¥½æ˜¯ç¬¬ k å¤§
- ç¶­è­·å †å¤§å°ç‚º kï¼Œç¢ºä¿é ‚éƒ¨å§‹çµ‚æ˜¯ç¬¬ k å¤§
- æ¯æ¬¡ add æ“ä½œåªéœ€è¦ O(log k) æ™‚é–“

### æ˜“éŒ¯é»
âš ï¸ **å‘é»1**ï¼šç”¨ Max Heap è€Œä¸æ˜¯ Min Heap - æœƒè®Šæˆç¬¬ k å°
âš ï¸ **å‘é»2**ï¼šå¿˜è¨˜é™åˆ¶å †å¤§å° - æœƒè®Šæˆæ’åºæ•´å€‹è³‡æ–™æµ
âš ï¸ **å‘é»3**ï¼šåˆå§‹ nums å¤§æ–¼ k æ²’æœ‰è™•ç† - æ‡‰åªä¿ç•™æœ€å¤§çš„ k å€‹

## ğŸ“Š è¤‡é›œåº¦åˆ†æ

| æ–¹æ³• | add æ™‚é–“ | ç©ºé–“ | å„ªé» | ç¼ºé» |
|------|----------|------|------|------|
| æ’åºæ³• | O(n log n) | O(n) | ç°¡å–® | å¤ªæ…¢ |
| **Min Heap** | O(log k) | O(k) | **å¿«é€Ÿ** | éœ€è¦ç†è§£å † |

*è¨»ï¼šn æ˜¯è³‡æ–™æµç¸½å¤§å°ï¼Œk æ˜¯åƒæ•¸ï¼ˆé€šå¸¸é å°æ–¼ nï¼‰*

## ğŸ¤” ç›¸é—œå•é¡Œ
- [Kth Largest Element in an Array] - ä¸€æ¬¡æ€§æŸ¥æ‰¾
- [Find Median from Data Stream] - é›™å †ï¼ˆæœ€å¤§å †+æœ€å°å †ï¼‰

## ğŸ“ å­¸ç¿’ç­†è¨˜
- **åˆå­¸é‡é»**ï¼šç†è§£ç‚ºä»€éº¼ç”¨ Min Heap æ‰¾ç¬¬ k å¤§
- **æ¨¡å¼è­˜åˆ¥**ï¼šçœ‹åˆ°ã€Œç¬¬ k å¤§/å°ã€+ã€Œè³‡æ–™æµã€å°±æƒ³åˆ° Heap
- **æŠ€å·§**ï¼šè¨˜ä½ Python çš„ `heapq` æ˜¯æœ€å°å †ï¼Œè¦æœ€å¤§å †å¯ä»¥å­˜è² æ•¸

## ğŸ”‘ é—œéµæ¨¡å¼
**ç¶­è­·å‰ k å€‹å…ƒç´ **
```python
heap = []
for val in data:
    heapq.heappush(heap, val)
    if len(heap) > k:
        heapq.heappop(heap)  # ç§»é™¤æœ€å°çš„
result = heap[0]  # ç¬¬ k å¤§
```

## ğŸ¯ è¿½è¹¤ä½ çš„é€²åº¦
- [ ] å®Œæˆç¬¬ä¸€æ¬¡è§£é¡Œ
- [ ] ä¸çœ‹è§£ç­”é‡æ–°è§£é¡Œ
- [ ] å˜—è©¦ç”¨ Max Heap è§£ç¬¬ k å°
- [ ] å‘ä»–äººè§£é‡‹ç‚ºä»€éº¼ç”¨ Min Heap æ‰¾ç¬¬ k å¤§

---
**é¡Œç›®é€£çµ**: [LeetCode 703](https://leetcode.com/problems/kth-largest-element-in-a-stream/)
